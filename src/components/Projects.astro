---
const projects = [
  {
    title: "FitoPrice",
    titleKey: "project6.title",
    description: "FitoPrice es una aplicación web para la gestión de precios de productos agrícolas. Permite a los usuarios consultar y comparar precios de diferentes proveedores, así como recibir alertas de cambios de precios. La aplicación está construida con React para el frontend, Express para el backend, y utiliza PostgreSQL en Supabase como base de datos. Además, integra N8N para la automatización de flujos de trabajo y utiliza TailwindCSS junto con ShadcnUI para un diseño moderno y responsivo.",
    descriptionKey: "project6.description",
    image: "/img/fitoprice-proyect.png",
    alt: "FitoPrice",
    tech: ["React", "Js", "Express", "N8N", "PostgreSQL", "Supabase", "TailwindCSS", "ShadcnUI"],
    techColors: [
      "bg-blue-500/20 text-blue-200",
      "bg-green-500/20 text-green-200",
      "bg-yellow-700/20 text-yellow-200",
      "bg-red-500/20 text-red-200",
      "bg-green-500/20 text-green-200",
      "bg-yellow-700/20 text-yellow-200",
      "bg-blue-500/20 text-blue-200",
      "bg-green-500/20 text-green-200",
    ],
    links: [
      {
        href: "https://github.com/josemmp2005/fitoprice",
        icon: "/svg/github.svg",
        label: "projects.code",
        bg: "bg-gray-800/70 hover:bg-gray-700",
      },
      {
        href: "https://fitoprice.netlify.app/",
        icon: "/svg/url.svg",
        label: "projects.web",
        bg: "bg-blue-800/70 hover:bg-blue-700",
      },
    ],
  },
  {
    title: "MyHandStats",
    titleKey: "project1.title",
    description: "En este proyecto he desarrollado una aplicación para el análisis de estadísticas de balonmano, como parte de mi Trabajo de Fin de Grado. La app permite registrar y visualizar datos de partidos y jugadores, facilitando el análisis de rendimiento. Para el backend se ha utilizado Python, la interfaz está construida con React y los datos se almacenan en una base de datos PostgreSQL desplegado en Supabase.",
    descriptionKey: "project1.description",
    image: "/img/myhandstats-proyect.png",
    alt: "MyHandStats",
    tech: ["React", "Python", "PostgreSQL"],
    techColors: [
      "bg-blue-500/20 text-blue-200",
      "bg-yellow-500/20 text-yellow-200",
      "bg-indigo-500/20 text-indigo-200",
    ],
    links: [
      {
        href: "https://github.com/pmerida08/myHandStats",
        icon: "/svg/github.svg",
        label: "projects.code",
        bg: "bg-gray-800/70 hover:bg-gray-700",
      },
      {
        href: "https://myhandstats.netlify.app/",
        icon: "/svg/url.svg",
        label: "projects.web",
        bg: "bg-blue-800/70 hover:bg-blue-700",
      },
    ],
  },
  {
    title: "Página Web Agroquimicos Mayén",
    titleKey: "project5.title",
    description: "En este proyecto se ha desarrollado una página web para la venta de zapatillas, con un diseño responsive y un panel de administración para la gestión de los productos. Para este proyecto se ha utilizado Wordpress y Woocommerce para la creación de la tienda online.",
    descriptionKey: "project5.description",
    image: "/img/proyecto-agro.png",
    alt: "Página de Venta de Zapatillas",
    tech: ["Astro"],
    techColors: [
      "bg-blue-800/20 text-blue-200",
    ],
    links: [
      {
        href: "https://github.com/josemmp2005/AgroMayenWeb",
        icon: "/svg/github.svg",
        label: "projects.code",
        bg: "bg-gray-800/70 hover:bg-gray-700",
      },
      {
        href: "https://agromayen.netlify.app/", 
        icon: "/svg/url.svg",
        label: "projects.web",
        bg: "bg-blue-800/70 hover:bg-blue-700",
      },
    ],
  },
  {
    title: "Reserva de Casas Rurales",
    titleKey: "project2.title",
    description: "En este proyecto se ha desarrollado una página web para la reserva de casas rurales, con un diseño responsive y un panel de administración para la gestión de las reservas, implementando también un modo oscuro nativo. Para este proyecto se ha utilizado HTML, CSS y JS.",
    descriptionKey: "project2.description",
    image: "/img/proyectoCasas.png",
    alt: "casas-rurales",
    tech: ["HTML", "CSS", "JavaScript"],
    techColors: [
      "bg-orange-500/20 text-orange-200",
      "bg-blue-500/20 text-blue-200",
      "bg-yellow-500/20 text-yellow-200",
    ],
    links: [
      {
        href: "https://github.com/iesgrancapitan-diw/practica12-diw-josemmp2005",
        icon: "/svg/github.svg",
        label: "projects.code",
        bg: "bg-gray-800/70 hover:bg-gray-700",
      },
      {
        href: "https://iesgrancapitan-diw.github.io/practica12-diw-josemmp2005/",
        icon: "/svg/url.svg",
        label: "projects.web",
        bg: "bg-blue-800/70 hover:bg-blue-700",
      },
    ],
  },
  {
    title: "Gestión de Portfolios",
    titleKey: "project3.title",
    description: "Para este proyecto he desarrollado una aplicación web para la gestión de portfolios, desde la creación de los mismos hasta la edición de estos, pudiendo añadir, proyectos, habilidades y experiencias. En este proyecto se ha utilizado HTML, CSS, PHP y MySQL.",
    descriptionKey: "project3.description",
    image: "/img/proyectoPortfolio2.png",
    alt: "Gestión de Portfolios",
    tech: ["HTML", "CSS", "PHP", "MySQL"],
    techColors: [
      "bg-orange-500/20 text-orange-200",
      "bg-blue-500/20 text-blue-200",
      "bg-indigo-500/20 text-indigo-200",
      "bg-yellow-700/20 text-yellow-200",
    ],
    links: [
      {
        href: "https://github.com/josemmp2005/proyecto_portfolios",
        icon: "/svg/github.svg",
        label: "projects.code",
        bg: "bg-gray-800/70 hover:bg-gray-700",
      },
    ],
  },
  {
    title: "Gestión de Centros Cívicos",
    titleKey: "project4.title",
    description: "En este proyecto se ha desarrollado una aplicación web para la gestión de centros cívicos, desde la creación de una API en PHP para el manejo de la base de datos en MySQL, hasta la creación de una aplicación en React para la gestión de los centros cívicos.",
    descriptionKey: "project4.description",
    image: "/img/centrosCivicos.png",
    alt: "Gestión de Centros Cívicos",
    tech: ["PHP", "MySQL", "React"],
    techColors: [
      "bg-indigo-500/20 text-indigo-200",
      "bg-yellow-700/20 text-yellow-200",
      "bg-blue-500/20 text-blue-200",
    ],
    links: [
      {
        href: "#",
        icon: "/svg/github.svg",
        label: "projects.code",
        bg: "bg-gray-800/70 hover:bg-gray-700",
      },
    ],
  }
];
---
<section class="py-12 text-white bg-transparent" id="proyectos">
  <h2 class="text-3xl font-bold text-center mb-12 tracking-wide " data-lang="projects.title">Proyectos</h2>
  <div
    class="px-4 md:px-12 opacity-0 translate-y-8 transition-all duration-700"
    id="projects-anim"
  >
    {
      projects.map((project) => (
        <article class="transition-transform duration-300 hover:scale-105 hover:bg-white/20 max-w-4xl mx-auto bg-white/10 rounded-2xl shadow-xl p-8 flex flex-col md:flex-row gap-8 items-center mb-10">
          <div class="flex-1 flex flex-col">
            <h3 class="text-2xl font-semibold mb-4 text-blue-300" data-lang={project.titleKey}>
              {project.title}
            </h3>
            <p class="mb-4 text-base leading-relaxed" data-lang={project.descriptionKey}>{project.description}</p>
            <div class="flex gap-3 flex-wrap mb-4">
              {project.tech.map((tech, idx) => (
                <span
                  class={`px-3 py-1 rounded-full text-sm font-semibold ${project.techColors[idx]}`}
                >
                  {tech}
                </span>
              ))}
            </div>
          </div>
          <div class="flex-1 flex flex-col items-center gap-4 md:gap-6">
            <img
              src={project.image}
              alt={project.alt}
              class="rounded-xl shadow-lg max-w-xs w-full object-cover border border-white/10"
              loading="lazy"
            />
            <div class="flex gap-4 mt-2">
              {project.links.map((link) => (
                <a
                  href={link.href}
                  class={`flex items-center gap-2 px-3 py-1 rounded transition ${link.bg}`}
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <img src={link.icon} alt={link.label} class="w-5 h-5" />
                  <span data-lang={link.label}>{link.label.includes('.') ? (link.label === 'projects.code' ? 'Código' : 'Web') : link.label}</span>
                </a>
              ))}
            </div>
          </div>
        </article>
      ))
    }
  </div>
</section>

<script is:inline>
  const projectsAnim = document.getElementById("projects-anim");
  function checkProjectsAnim() {
    const rect = projectsAnim.getBoundingClientRect();
    if (rect.top < window.innerHeight - 100 && rect.bottom > 100) {
      projectsAnim.classList.remove("opacity-0", "translate-y-8");
      projectsAnim.classList.add("opacity-100", "translate-y-0");
    } else {
      projectsAnim.classList.remove("opacity-100", "translate-y-0");
      projectsAnim.classList.add("opacity-0", "translate-y-8");
    }
  }
  window.addEventListener("scroll", checkProjectsAnim);
  window.addEventListener("resize", checkProjectsAnim);
  checkProjectsAnim();
</script>